!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){return this._hasInvalidInput(this._inputEls)?this.disableButton():this.enableButton()}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this.disableButton(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick({link:this._link,name:this._name})))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return e.src=this._link,e.alt=this._name,t.textContent=this._name,this._setEventListeners(),this._element}}const s=document.querySelector(".profile__edit-button"),n=document.querySelector("#add-button"),i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class o{constructor(e){let{modalSelector:t}=e;this._modal=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}openModal(){this._modal.classList.add("modal__opened"),document.addEventListener("keyup",this._handleEscClose)}closeModal(){this._modal.classList.remove("modal__opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){e.preventDefault(),"Escape"===e.key&&this.closeModal()}setEventListeners(){this._modal.addEventListener("mousedown",(e=>{e.target.closest(".modal__content")&&!e.target.classList.contains("modal__close")||this.closeModal()}))}}class r extends o{constructor(e){let{modalSelector:t,handleFormSubmit:s,resetOnClose:n}=e;super({modalSelector:t}),this._resetOnClose=n,this._modalForm=this._modal.querySelector(".modal__form"),this._inputList=this._modalForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}closeModal(){this._resetOnClose&&this._modalForm.reset(),super.closeModal()}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.closeModal()})),super.setEventListeners()}}const l=new class{constructor(e,t){let{items:s,renderer:n}=e;this._initialArray=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._initialArray.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{l.addItem(a(e))}},".cards__list");function a(e){return new t(e,"#card-template",(e=>{u.openModal(e)})).getView()}l.renderItems(),new e(i,document.querySelector("#edit-profile-form")).enableValidation();const d=new e(i,document.querySelector("#add-card-form"));d.enableValidation();const c=new r({modalSelector:"#modal-edit",handleFormSubmit:e=>{m.setUserInfo(e)}});c.setEventListeners();const _=new r({modalSelector:"#modal-add",handleFormSubmit:e=>{l.addItem(a(e))},resetOnClose:!0});_.setEventListeners();const u=new class extends o{openModal(e){let{name:t,link:s}=e;this._modal.querySelector(".modal__preview-caption").textContent=t,this._image=this._modal.querySelector(".modal__preview-image"),this._image.alt=t,this._image.src=s,super.openModal()}}({modalSelector:"#modal-image"});u.setEventListeners();const m=new class{constructor(e){let{userNameSelector:t,userTitleSelector:s}=e;this._userName=document.querySelector(t),this._userTitle=document.querySelector(s)}getUserInfo(){return{userName:this._userName.textContent,userTitle:this._userTitle.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._userName.textContent=t,this._userTitle.textContent=s}}({userNameSelector:".profile__title",userTitleSelector:".profile__description"});s.addEventListener("click",(()=>{const{userName:e,userTitle:t}=m.getUserInfo();document.querySelector(".modal__input_type_name").value=e,document.querySelector(".modal__input_type_description").value=t,d.resetValidation(),c.openModal()})),n.addEventListener("click",(()=>{d.resetValidation(),_.openModal()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNSLEdGc0RvQyxDQUFDSixjQUFlLGlCQUN0RHdDLEVBQVdoQyxvQkFFWCxNQUFNbUMsRUFBVyxJR25FRixNQUNicEgsWUFBWSxHQUF5QyxJQUF6QyxpQkFBRXdILEVBQWdCLGtCQUFFQyxHQUFtQixFQUNqRHRILEtBQUt1SCxVQUFZN0QsU0FBUzNDLGNBQWNzRyxHQUN4Q3JILEtBQUt3SCxXQUFhOUQsU0FBUzNDLGNBQWN1RyxFQUMzQyxDQUVBRyxjQUNFLE1BQU8sQ0FDTEMsU0FBVTFILEtBQUt1SCxVQUFVcEcsWUFDekJ3RyxVQUFXM0gsS0FBS3dILFdBQVdyRyxZQUUvQixDQUVBK0YsWUFBWSxHQUF1QixJQUF2QixLQUFFbEUsRUFBSSxZQUFFNEUsR0FBYSxFQUMvQjVILEtBQUt1SCxVQUFVcEcsWUFBYzZCLEVBQzdCaEQsS0FBS3dILFdBQVdyRyxZQUFjeUcsQ0FDaEMsR0htRDRCLENBQzVCUCxpQkg3Q3FCLGtCRzhDckJDLGtCSDdDMkIsMEJHZ0Q3QnBELEVBQWtCM0IsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTSxTQUFFbUYsRUFBUSxVQUFFQyxHQUFjVixFQUFTUSxjQUN6Qy9ELFNBQVMzQyxjSHhEUywyQkd3RGlDOEUsTUFBUTZCLEVBQzNEaEUsU0FBUzNDLGNIeERnQixrQ0d3RGlDOEUsTUFBUThCLEVBQ2xFWixFQUFpQnhGLGtCQUNqQnlGLEVBQWlCdEMsV0FBVyxJQUc5QlAsRUFBYzVCLGlCQUFpQixTQUFTLEtBQ3RDd0UsRUFBaUJ4RixrQkFDakI0RixFQUFhekMsV0FBVyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHt0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKX0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVuYWJsZUJ1dHRvbigpO1xuICB9XG4gIFxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuICBcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge2V2dC5wcmV2ZW50RGVmYXVsdCgpfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSkpO1xuICB9XG4gICAgXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuICAgICAgXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn0iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFibGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRMaXN0RWxlbWVudDogXCIuY2FyZHNfX2xpc3RcIixcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIHByZXZpZXdNb2RhbDogXCIjbW9kYWwtaW1hZ2VcIixcblxuICBwcm9maWxlTmFtZUlucHV0OiBcIi5tb2RhbF9faW5wdXRfdHlwZV9uYW1lXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0OiBcIi5tb2RhbF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiLFxuXG4gIHByb2ZpbGVFZGl0TW9kYWw6IFwiI21vZGFsLWVkaXRcIixcbiAgY2FyZEFkZE1vZGFsOiBcIiNtb2RhbC1hZGRcIiwgXG4gIHByb2ZpbGVUaXRsZUVsZW1lbnQ6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbn07XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkcyBBcnJheSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcbiAgfVxuXTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW5Nb2RhbCgpIHtcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpIHtcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWV2dC50YXJnZXQuY2xvc2VzdChcIi5tb2RhbF9fY29udGVudFwiKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEZvcm0gZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgcmVzZXRPbkNsb3NlIH0pIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcmVzZXRPbkNsb3NlID0gcmVzZXRPbkNsb3NlO1xuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IChmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgaWYgKHRoaXMuX3Jlc2V0T25DbG9zZSkge1xuICAgICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgfVxuICAgIHN1cGVyLmNsb3NlTW9kYWwoKTtcbiAgfVxuXG4gIFxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59IiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHtcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGNhcmRBZGRCdXR0b24sXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgc2VsZWN0b3JzLFxuICBpbml0aWFsQ2FyZHMsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShnZXRDYXJkVmlldyhjYXJkRGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIHNlbGVjdG9ycy5jYXJkTGlzdEVsZW1lbnRcbik7XG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5mdW5jdGlvbiBnZXRDYXJkVmlldyhjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKGRhdGEpID0+IHtcbiAgICBpbWFnZU1vZGFsLm9wZW5Nb2RhbChkYXRhKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbGlkYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLWZvcm1cIik7XG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWRpdEZvcm1FbGVtZW50KTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWxlbWVudCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybSh7XG4gIG1vZGFsU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlRWRpdE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICB9XG59KTtcbmVkaXRQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3Q2FyZE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oe1xuICBtb2RhbFNlbGVjdG9yOiBzZWxlY3RvcnMuY2FyZEFkZE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oZ2V0Q2FyZFZpZXcoZGF0YSkpO1xuICB9LFxuICByZXNldE9uQ2xvc2U6IHRydWUsXG59KTtcbm5ld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IE1vZGFsV2l0aEltYWdlKHttb2RhbFNlbGVjdG9yOiBcIiNtb2RhbC1pbWFnZVwifSk7XG5pbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVUaXRsZUVsZW1lbnQsXG4gIHVzZXJUaXRsZVNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCxcbn0pO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IHVzZXJOYW1lLCB1c2VyVGl0bGUgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVOYW1lSW5wdXQpLnZhbHVlID0gdXNlck5hbWU7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVEZXNjcmlwdGlvbklucHV0KS52YWx1ZSA9IHVzZXJUaXRsZTtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuTW9kYWwoKTtcbn0pO1xuXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIG5ld0NhcmRNb2RhbC5vcGVuTW9kYWwoKTtcbn0pOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHt0aGlzLl9yZW5kZXJlcihpdGVtKX0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn0iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWxcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcbiAgb3Blbk1vZGFsKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlldy1jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIilcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG5cbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyVGl0bGVTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlclRpdGxlU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJOYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHVzZXJUaXRsZTogdGhpcy5fdXNlclRpdGxlLnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyVGl0bGUudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxufSJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbHMiLCJmb3JFYWNoIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJpbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImltYWdlRWxlbWVudCIsImNhcmRUaXRsZSIsInNyYyIsImFsdCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY2FyZEFkZEJ1dHRvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsIk1vZGFsIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuTW9kYWwiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY2xvc2VzdCIsImNvbnRhaW5zIiwiTW9kYWxXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJyZXNldE9uQ2xvc2UiLCJzdXBlciIsIl9yZXNldE9uQ2xvc2UiLCJfbW9kYWxGb3JtIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJnZXRDYXJkVmlldyIsImltYWdlTW9kYWwiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdDYXJkTW9kYWwiLCJfaW1hZ2UiLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlclRpdGxlU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlclRpdGxlIiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJUaXRsZSIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==